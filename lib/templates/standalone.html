<!DOCTYPE html>
    <head>
        <title>Beyond</title>

        <link rel="shortcut icon" href="/favicon.ico">

        <base href="/">

        <!-- General META -->
        <meta charset="utf-8">
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <script src="https://cdn-public-peach.peachworks.com/beyond-js/1.3.5/beyondjs.min.js"></script>

        {% if watchSocket %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.0/socket.io.js"></script>
        {% endif %}

        {% if isCordova %}
            <script src="/cordova/{{cordovaPlatform}}/cordova.js" type="text/javascript"></script>
        {% endif %}

        {% if serveDist %}
          <link href="/app.css" rel="stylesheet" />
        {% else %}
          <link href="{{protocol}}://{{host}}:{{port}}/app.css" rel="stylesheet" />
        {% endif %}

        <script>

            window.beyondJs = new BeyondJs();
            window.BeyondFramework = window.PeachWorksFramework = {{BeyondApp|json|raw}};

            window.beyondJs.session.setOptions({
              // window.BeyondFramework.api
              apiURL: window.BeyondFramework.api.url,
              apiVersion: window.BeyondFramework.api.version,
              checkoutApiUrl: window.BeyondFramework.api.checkoutApiUrl, // !!! deprecated
              checkoutClientUrl: window.BeyondFramework.api.checkoutClientUrl, // !!! deprecated
              hubURL: window.BeyondFramework.api.hubURL, // !!! deprecated
              payrollApiUrl: window.BeyondFramework.api.payrollApiUrl, // !!! deprecated
              // window.BeyondFramework.externalConfigs 1:1
              externalConfigs: window.BeyondFramework.externalConfigs,
              // window.BeyondFramework.session
              development: window.BeyondFramework.session.development,
              adminSessionCookieName: window.BeyondFramework.session.adminCookieName,
              adminSessionExpiryCookieName: window.BeyondFramework.session.adminExpiryCookieName,
              adminSessionRefreshCookieName: window.BeyondFramework.session.adminRefreshCookieName,
              sessionCookieName: window.BeyondFramework.session.cookieName,
              sessionRefreshCookieName: window.BeyondFramework.session.refreshCookieName,
              sessionExpiryCookieName: window.BeyondFramework.session.expiryCookieName,
              sessionRefreshTimeCookieName: window.BeyondFramework.session.sessionRefreshTimeCookieName,
              userSaveCookieName: window.BeyondFramework.session.userSaveCookieName,
              devSessionCookieName: window.BeyondFramework.session.devCookieName,
              sessionRefreshTimeout: window.BeyondFramework.session.sessionRefreshTimeout,
              defaultAppsOrder: window.BeyondFramework.session.defaultAppsOrder,
              mobileApp: window.BeyondFramework.session.mobileApp,
              segmentApiKey: window.BeyondFramework.session.segmentApiKey // !!! deprecated
            });

        </script>

    </head>

    <body flex layout="row" ng-app="{{BeyondApp.angular.moduleName}}" ng-strict-di>

      <div ng-view layout="column" layout-fill></div>

      {% if serveDist %}
        <script src="/app.js"></script>
      {% else %}
        <script src="{{protocol}}://{{host}}:{{port}}/app.bundle.js"></script>
      {% endif %}
  
      <script>
        angular.module('{{BeyondApp.angular.moduleName}}').run();
      </script>
  
    </body>
</html>
