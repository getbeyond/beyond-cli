#!/usr/bin/env node
'use strict';

let BuildProcess               = require('../lib/build-process');
let CLIConfig                  = require('../lib/config');
let program                    = require('commander');
let setupConsoleLoggingHelpers = require('../lib/setup-console-logging-helpers');

setupConsoleLoggingHelpers();

program
  .option('--dist-dir [value]', 'Custom dist directory path')
  .parse(process.argv);

try {

  let buildProcess = new BuildProcess(new CLIConfig(program));
  let cleanPromise = new Promise(buildProcess.clean.bind(buildProcess));

  cleanPromise
    .then(() => {
      console.info('Dist directory removed.');
    });

} catch (ex) {

  console.error(ex);
  if (ex.stack) console.error(ex.stack);
  return false;
  
}
